{% extends 'base.html' %}

{% block content %}
{% include 'navbar.html' %}

<div class="container mx-auto mt-10">
    <h1 class="text-center text-3xl font-bold text-yellow-600">{{ nama_ecommerce }}</h1>

    <div class="mt-6 p-4 bg-yellow-100 rounded-lg">
        <h5 class="font-bold">NPM:</h5>
        <p>{{ npm }}</p>

        <h5 class="font-bold">Name:</h5>
        <p>{{ name }}</p>

        <h5 class="font-bold">Class:</h5>
        <p>{{ class }}</p>

        <h5 class="font-bold">E-Commerce:</h5>
        <p>{{ ecommerce }}</p>

        <h5 class="font-bold">Nama e-commerce:</h5>
        <p>{{ nama_ecommerce }}</p>

        <!-- Last Login -->
        {% if request.COOKIES.last_login %}
            <h5 class="font-bold">Last Login:</h5>
            <p>{{ request.COOKIES.last_login }}</p>
        {% else %}
            <p>You have not logged in yet or your login session has expired.</p>
        {% endif %}
    </div>

    <h2 class="mt-8 text-2xl font-bold text-yellow-600">Daftar Produk</h2>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-4">
        {% if not products %}
            <div class="col-span-1 sm:col-span-2 lg:col-span-3 text-center p-4 bg-yellow-200 rounded-lg">
                <p>Belum ada produk yang tersedia di {{ nama_ecommerce }}.</p>
            </div>
        {% else %}
            {% for product in products %}
                <div class="bg-white shadow-md rounded-lg overflow-hidden">
                    <img src="{{ product.image.url }}" alt="{{ product.nama }}" class="w-full h-48 object-cover" />
                    <div class="p-4">
                        <h3 class="text-lg font-bold text-yellow-600">{{ product.nama }}</h3>
                        <p class="text-gray-700">Harga: Rp {{ product.harga }}</p>
                        <p class="text-gray-600">{{ product.deskripsi }}</p>
                        <p class="text-gray-600">Stok: {{ product.stok }}</p>
                        <p class="text-gray-600">Kategori: {{ product.kategori }}</p>
                        <p class="text-gray-600">Ukuran: {{ product.ukuran }}</p>
                        <p class="text-gray-600">Warna: {{ product.warna }}</p>
                        <p class="text-gray-600">Diskon: {{ product.diskon }}%</p>
                        <p class="text-gray-400">Dibuat: {{ product.tanggal_dibuat }}</p>
                        <p class="text-gray-400">Diperbarui: {{ product.tanggal_diperbarui }}</p>
                        <div class="flex justify-between mt-4">
                            <a href="{% url 'main:edit_produk' product.id %}" class="bg-yellow-500 text-white font-bold py-2 px-4 rounded transition duration-300 hover:bg-yellow-600">Edit</a>
                            <a href="{% url 'main:delete_produk' product.id %}" class="bg-red-500 text-white font-bold py-2 px-4 rounded transition duration-300 hover:bg-red-600">Delete</a>
                        </div>
                    </div>
                </div>
            {% empty %}
            <div class="col-span-1 sm:col-span-2 lg:col-span-3 text-center">
                <p>Tidak ada produk ditemukan.</p>
            </div>
            {% endfor %}
        {% endif %}
    </div>

    <div class="flex justify-between mt-6">
        <a href="{% url 'main:tambah_produk' %}" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded transition duration-300">
            Tambah Produk Baru
        </a>

        <a href="{% url 'main:logout' %}" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-6 rounded transition duration-300">
            Logout
        </a>
    </div>
</div>

{% endblock content %}